/*! gaw-droplist - v1.0.27 - 2019-07-22 */


!function(){"use strict";angular.module("bb.droplist.tmpl",[]).run(["$templateCache",function(a){a.put("bb/droplist.html",'<div class="droplist" \nng-class="{\'is-open\': vm.isOpen, \'has-content\': content || hasTranscluded}">\n    <div class="droplist__inner">\n        <span role="button" tabindex="0" \naria-expanded="{{vm.isOpen}}" ng-click="vm.open()">\n            <i \nng-class="icon" ng-if="icon"></i>\n            <span ng-bind-html="title" \nclass="droplist__title" ng-class="{\'blur\': vm.isOpen}"></span>\n            <i \nclass="droplist__arrow" ng-class="arrow" ng-if="arrow"></i>\n        </span>\n        <div ng-show="vm.isOpen" class="droplist__content" \nng-style="vm.style">\n            <p ng-bind-html="content" ng-if="content"></p>\n\n            <ng-transclude></ng-transclude>\n        </div>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(){var a=this;a.isOpen=!1,a.open=function(){a.isOpen=!a.isOpen}}function b(a){function b(b,d,e,f,g){function h(){c(d,b,f)}b.style="",b.isOpen=!1,b.clickCount=0,b.hasTranscluded=!1,g(function(a){a.length&&(b.hasTranscluded=!0)});var i="mi mi--arrow-drop-down";void 0===e.bbArrow&&(e.bbArrow=i),b.isReverse&&angular.element(d[0].querySelector(".droplist__inner")).addClass("droplist__reverse"),b.closeOnSelect||(b.closeOnSelect=!1),e.$observe("bbArrow",function(a){a||(b.arrow=i)});var j=function(){b.$apply(function(){f.isOpen=!1})},k=function(a){d===a.target||d[0].contains(a.target)||j(),console.log(b.clickCount),d[0].contains(a.target)?(b.isOpen&&b.closeOnSelect&&(0===b.clickCount?(b.clickCount=1,j()):b.clickCount=0),0===b.clickCount&&(b.isOpen=!b.isOpen,console.log(b.isOpen))):(b.isOpen=!1,b.clickCount=0)};angular.element(d[0].children).find("span").on("keydown",function(a){13===a.keyCode&&b.$apply(function(){f.isOpen=!f.isOpen}),d[0].children[0].children[1].querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length||angular.element(d[0].querySelector(".droplist__content")).attr("tabindex","0")}),d.on("keydown",function(a){27===a.keyCode&&b.$apply(function(){f.isOpen=!1,angular.element(d[0].children).find("span")[0].focus()})}),a.on("click",k),a.on("keydown",k),angular.element(d).on("click",h),b.$on("$destroy",function(){a.off("click",k)})}function c(a,b,c){if(b.isReverse){var d=a[0].querySelectorAll("li").length,e=2.5*d+.5;c.style={top:-(e>13?13:e)+"rem"},b.$apply()}}return{controller:"bbDroplistController",controllerAs:"vm",link:b,replace:!0,restrict:"E",scope:{icon:"@?bbIcon",title:"@bbTitle",arrow:"@?bbArrow",content:"@?bbContent",isReverse:"=?bbIsReverse",closeOnSelect:"=?bbCloseOnSelect"},templateUrl:"bb/droplist.html",transclude:!0}}angular.module("bb.droplist",["bb.droplist.tmpl","ngSanitize"]).controller("bbDroplistController",a).directive("bbDroplist",b),b.$inject=["$document"]}();